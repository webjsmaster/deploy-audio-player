var E=Object.defineProperty;var y=(s,e,t)=>e in s?E(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var p=(s,e,t)=>(y(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();class r{constructor(e){this.element=null,this.createElement(e)}createElement(e){this.element=document.createElement(e.tag),this.setClasses(e.classNames),this.setTextContent(e.textContent),this.setCallback(e.callback),this.setAttribute(e.attribute)}getElement(){return this.element}setClasses(e){e.forEach(t=>this.element.classList.add(t))}setTextContent(e){this.element.textContent=e}setCallback(e){typeof e=="function"&&this.element.addEventListener("click",t=>e(t))}setAttribute(e){e&&e.forEach(t=>this.element.setAttribute(t.id,t.value))}}class l{constructor(e){this.elementCreator=this.createView(e)}getHtmlElement(){return this.elementCreator.getElement()}createView(e){const t={tag:e.tag,classNames:e.classNames,textContent:e.textContent,callback:e.callback,attribute:e.attribute};return new r(t)}}const v=""+new URL("rs_school-f5e70645.svg",import.meta.url).href;class C extends l{constructor(){const e={tag:"div",classNames:["footer__school"]};super(e),this.configureView()}configureView(){const e={tag:"a",classNames:["footer__link"],attribute:[{id:"href",value:"https://rs.school/"},{id:"target",value:"_blank"}]},t={tag:"img",classNames:["footer__img"],attribute:[{id:"src",value:`${v}`},{id:"fill",value:"red"}]},n=new r(e).getElement();n.append(new r(t).getElement()),this.elementCreator.getElement().append(n)}}const x=""+new URL("github-9e97b080.svg",import.meta.url).href;class L extends l{constructor(){const e={tag:"div",classNames:["footer__profile"]};super(e),this.configureView()}configureView(){const e={tag:"a",classNames:["footer__profile-link"],attribute:[{id:"href",value:"https://github.com/webjsmaster"},{id:"target",value:"_blank"}]},t={tag:"img",classNames:["footer__img"],attribute:[{id:"src",value:`${x}`},{id:"fill",value:"red"}]},n=new r(e).getElement();n.append(new r(t).getElement()),this.elementCreator.getElement().append(n)}}class _ extends l{constructor(){const e={tag:"div",classNames:["footer__container"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new C().getHtmlElement(),new L().getHtmlElement())}}class T extends l{constructor(){const e={tag:"footer",classNames:["footer"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new _().getHtmlElement())}}const N=""+new URL("play2-31baef82.png",import.meta.url).href,V=""+new URL("pause2-c0d9faa1.png",import.meta.url).href,k=""+new URL("arrowR1-1e16bfea.png",import.meta.url).href,R=""+new URL("arrowL1-82d62cae.png",import.meta.url).href,H=""+new URL("Vandelux-Tulum-471e5c30.mp3",import.meta.url).href,P=""+new URL("Meute-Holy-harbour-50c56cfa.mp3",import.meta.url).href,B=""+new URL("Neon Project Feat. Ana - The Gate Of Passion-3d9bb5b6.mp3",import.meta.url).href,S=""+new URL("vandelux-fb469696.jpeg",import.meta.url).href,I=""+new URL("meute-bb7d06a7.jpg",import.meta.url).href,A=""+new URL("neon-audio2-0bf91e1b.jpg",import.meta.url).href,o={play:"play",pause:"pause",arrowLeft:"arrowLeft",arrowRight:"arrowRight"},U={play:N,pause:V,arrowLeft:R,arrowRight:k},f=[{id:1,poster:S,name:"Vandelux - Tulum",audio:H},{id:2,poster:I,name:"Meute - Holy harbour",audio:P},{id:3,poster:A,name:"Neon Project Feat. Ana - The Gate Of Passion",audio:B}];class m extends l{constructor(e){const t={tag:"button",classNames:["button"],textContent:"",attribute:[{id:"id",value:e}],callback:()=>this.handlerButton()};super(t),this.player=new c,this.configureView(e)}configureView(e){this.elementCreator.getElement().append(this.insertImg(e).getElement())}insertImg(e){const n={tag:"img",attribute:[{id:"src",value:U[e]}],callback:null,classNames:[],textContent:""};return new r(n)}handlerButton(){const e=this.getHtmlElement().getAttribute("id");e===o.play||e===o.pause?(this.player.toggleStatus(),this.player.updateView()):(e===o.arrowRight||e===o.arrowLeft)&&this.player.changeTrack(e)}}class $ extends l{constructor(e){const t={tag:"div",textContent:"",classNames:["range"],callback:null};super(t),this.player=new c,this.range=null,this.rangeRight=null,this.configureView(e),this.updatePos()}configureView(e){console.log("⭐: ",e);const n={tag:"input",textContent:"",classNames:[],callback:null,attribute:[{id:"id",value:"range"},{id:"type",value:"range"},{id:"min",value:"0"},{id:"max",value:e},{id:"value",value:"0"},{id:"step",value:"1"}]},a={tag:"div",textContent:"",classNames:["range-line"],callback:null},i={tag:"div",textContent:"",classNames:["range-line-right"],callback:null},h={tag:"div",textContent:"",classNames:["range-line-left"],callback:null},w=this.elementCreator.getElement(),d=new r(a).getElement();this.rangeRight=new r(i).getElement();const b=new r(h).getElement();d.append(b,this.rangeRight),this.range=new r(n).getElement(),this.range.addEventListener("input",()=>{this.player.audio.currentTime=this.range.value,this.updatePos()}),w.append(this.range,d)}setValueRange(e){e!=="NaN"&&(this.range.value=e)}getRangePercent(){const{max:e}=this.range,{min:t}=this.range,n=this.range.value-t,a=e-t;return n/a}updatePos(){const t=this.getRangePercent()*100;this.rangeRight.style.width=`calc(100% - ${t}%)`}}function g(s){let e=parseInt(s,10),t=parseInt(e/60,10);e-=t*60;const n=parseInt(t/60,10);return t-=n*60,n===0?`${t}:${String(e%60).padStart(2,0)}`:`${String(n).padStart(2,0)}:${t}:${String(e%60).padStart(2,0)}`}class O extends l{constructor(){const e={tag:"div",classNames:["preloader"]};super(e),this.configureView()}configureView(){const e={tag:"div",classNames:["preloader__bar"]},t=this.elementCreator.getElement();return Array.from(Array(5)).forEach(()=>t.append(new r(e).getElement())),this.elementCreator.getElement()}}class c extends l{constructor(){super({tag:"div",classNames:["player"],textContent:"",callback:null});p(this,"_currentTrack",0);p(this,"_isPlay",!1);p(this,"_isLoading",!1);if(this.observers=[],c.exists)return c.instance;c.instance=this,c.exists=!0,this.content=f,this.configureAudio()}getStatus(){return this._isPlay}configureAudio(){this.audio=new Audio,this.audio.src=this.content[this._currentTrack].audio,this.setStatusLoading(!0),this.configureView(),this.audio.addEventListener("loadeddata",()=>{this.setStatusLoading(!1),this.configureView(),this.name.textContent=this.content[this._currentTrack].name,this.lengthTime.textContent=g(this.audio.duration),setInterval(()=>{this.range.setValueRange(this.audio.currentTime),this.range.updatePos(),this.currentTime.textContent=g(this.audio.currentTime)},500),console.log("🍁: ",g(this.audio.duration))},!1),this.audio.addEventListener("ended",()=>{this.changeTrack(o.arrowRight)})}toggleStatus(){this._isPlay=!this._isPlay,this._isPlay?this.audio.play():this.audio.pause()}configureView(){const t=this.elementCreator.getElement();t.replaceChildren(),this.playButton=null,this._isPlay?this.playButton=new m(o.pause).getHtmlElement():this.playButton=new m(o.play).getHtmlElement(),this.leftButton=new m(o.arrowLeft).getHtmlElement(),this.rightButton=new m(o.arrowRight).getHtmlElement(),this.range=new $(this.audio.duration);const n=new r({tag:"div",classNames:["time"]}).getElement();this.currentTime=new r({tag:"div",classNames:["time__current"]}).getElement(),this.name=new r({tag:"div",classNames:["time__name"]}).getElement(),this.lengthTime=new r({tag:"div",classNames:["time__length"]}).getElement(),this.currentTime.textContent=g(this.audio.currentTime),n.append(this.currentTime,this.name,this.lengthTime),this._isLoading?t.append(new O().getHtmlElement()):t.append(this.playButton,n,this.range.getHtmlElement(),this.leftButton,this.rightButton)}updateView(){const t=this.elementCreator.getElement();t.removeChild(this.playButton),this._isPlay?this.playButton=new m(o.pause).getHtmlElement():this.playButton=new m(o.play).getHtmlElement(),t.prepend(this.playButton),this.range.setValueRange(this.audio.currentTime),this.range.updatePos(),this.currentTime.textContent=g(this.audio.currentTime),this.lengthTime.textContent=g(this.audio.duration)}changeTrack(t){this.audio.pause(),this.audio=null,t===o.arrowLeft?this._currentTrack=this._currentTrack===0?this.content.length-1:this._currentTrack-1:t===o.arrowRight&&(this._currentTrack=this._currentTrack===this.content.length-1?0:this._currentTrack+1),this.notifyObserver(),this.configureAudio(),this._isPlay?this.audio.play():this.audio.pause()}getCurrentTrack(){return this._currentTrack}setStatusLoading(t){this._isLoading=t}getStatusLoading(){return this._isLoading}subscribe(t){this.observers.push(t)}notifyObserver(){this.observers.forEach(t=>t.update())}}class u extends l{constructor(){const e={tag:"div",classNames:["poster"],textContent:"",callback:null};if(super(e),u.exists)return u.instance;u.instance=this,u.exists=!0,this.player=new c,this.content=f,this.configureView()}configureView(){const e=this.elementCreator.getElement(),t=this.content[this.player.getCurrentTrack()].poster;e.replaceChildren();const n={tag:"img",classNames:["poster__image"],attribute:[{id:"src",value:t}],callback:null,textContent:""};e.append(new r(n).getElement())}update(){this.configureView()}}class j extends l{constructor(){const e={tag:"div",classNames:["content"],textContent:"",callback:null};super(e),this.configureView()}configureView(){const e=this.elementCreator.getElement(),t=new c().getHtmlElement(),n=new u().getHtmlElement();e.append(n,t)}}class F extends l{constructor(){const e={tag:"main",classNames:["main"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new j().getHtmlElement())}}class M extends l{constructor(){const e={tag:"div",classNames:["wrapper"],textContent:"",callback:null};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new F().getHtmlElement(),new T().getHtmlElement())}}class q{constructor(){this.body=document.querySelector("#app"),this.createHtmlElement()}createHtmlElement(){const e=new M;this.body.append(e.getHtmlElement())}}const G=new u,K=new c;K.subscribe(G);new q;
