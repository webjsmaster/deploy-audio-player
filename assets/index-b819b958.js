var b=Object.defineProperty;var E=(a,t,e)=>t in a?b(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var p=(a,t,e)=>(E(a,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();class o{constructor(t){this.element=null,this.createElement(t)}createElement(t){this.element=document.createElement(t.tag),this.setClasses(t.classNames),this.setTextContent(t.textContent),this.setCallback(t.callback),this.setAttribute(t.attribute)}getElement(){return this.element}setClasses(t){t.forEach(e=>this.element.classList.add(e))}setTextContent(t){this.element.textContent=t}setCallback(t){typeof t=="function"&&this.element.addEventListener("click",e=>t(e))}setAttribute(t){t&&t.forEach(e=>this.element.setAttribute(e.id,e.value))}}class c{constructor(t){this.elementCreator=this.createView(t)}getHtmlElement(){return this.elementCreator.getElement()}createView(t){const e={tag:t.tag,classNames:t.classNames,textContent:t.textContent,callback:t.callback,attribute:t.attribute};return new o(e)}}class C extends c{constructor(){const t={tag:"footer",classNames:["footer"]};super(t),this.configureView()}configureView(){const t=this.elementCreator.getElement();t.textContent="FOOTER"}}const x=""+new URL("play2-31baef82.png",import.meta.url).href,v=""+new URL("pause2-c0d9faa1.png",import.meta.url).href,T=""+new URL("arrowR1-1e16bfea.png",import.meta.url).href,L=""+new URL("arrowL1-82d62cae.png",import.meta.url).href,R=""+new URL("Vandelux-Tulum-471e5c30.mp3",import.meta.url).href,N=""+new URL("Meute-Holy-harbour-50c56cfa.mp3",import.meta.url).href,k=""+new URL("Neon Project Feat. Ana - The Gate Of Passion-3d9bb5b6.mp3",import.meta.url).href,V=""+new URL("vandelux-fb469696.jpeg",import.meta.url).href,H=""+new URL("meute-bb7d06a7.jpg",import.meta.url).href,B=""+new URL("neon-audio2-0bf91e1b.jpg",import.meta.url).href,i={play:"play",pause:"pause",arrowLeft:"arrowLeft",arrowRight:"arrowRight"},P={play:x,pause:v,arrowLeft:L,arrowRight:T},f=[{id:1,poster:V,name:"Vandelux - Tulum",audio:R},{id:2,poster:H,name:"Meute - Holy harbour",audio:N},{id:3,poster:B,name:"Neon Project Feat. Ana - The Gate Of Passion",audio:k}];class m extends c{constructor(t){const e={tag:"button",classNames:["button"],textContent:"",attribute:[{id:"id",value:t}],callback:()=>this.handlerButton()};super(e),this.player=new l,this.configureView(t)}configureView(t){this.elementCreator.getElement().append(this.insertImg(t).getElement())}insertImg(t){const n={tag:"img",attribute:[{id:"src",value:P[t]}],callback:null,classNames:[],textContent:""};return new o(n)}handlerButton(){const t=this.getHtmlElement().getAttribute("id");t===i.play||t===i.pause?(this.player.toggleStatus(),this.player.updateView()):(t===i.arrowRight||t===i.arrowLeft)&&this.player.changeTrack(t)}}class _ extends c{constructor(t){const e={tag:"div",textContent:"",classNames:["range"],callback:null};super(e),this.player=new l,this.range=null,this.rangeRight=null,this.configureView(t),this.updatePos()}configureView(t){console.log("⭐: ",t);const n={tag:"input",textContent:"",classNames:[],callback:null,attribute:[{id:"id",value:"range"},{id:"type",value:"range"},{id:"min",value:"0"},{id:"max",value:t},{id:"value",value:"0"},{id:"step",value:"1"}]},s={tag:"div",textContent:"",classNames:["range-line"],callback:null},r={tag:"div",textContent:"",classNames:["range-line-right"],callback:null},g={tag:"div",textContent:"",classNames:["range-line-left"],callback:null},w=this.elementCreator.getElement(),d=new o(s).getElement();this.rangeRight=new o(r).getElement();const y=new o(g).getElement();d.append(y,this.rangeRight),this.range=new o(n).getElement(),this.range.addEventListener("input",()=>{this.player.audio.currentTime=this.range.value,this.updatePos()}),w.append(this.range,d)}setValueRange(t){t!=="NaN"&&(this.range.value=t)}getRangePercent(){const{max:t}=this.range,{min:e}=this.range,n=this.range.value-e,s=t-e;return n/s}updatePos(){const e=this.getRangePercent()*100;this.rangeRight.style.width=`calc(100% - ${e}%)`}}function h(a){let t=parseInt(a,10),e=parseInt(t/60,10);t-=e*60;const n=parseInt(e/60,10);return e-=n*60,n===0?`${e}:${String(t%60).padStart(2,0)}`:`${String(n).padStart(2,0)}:${e}:${String(t%60).padStart(2,0)}`}class l extends c{constructor(){super({tag:"div",classNames:["player"],textContent:"",callback:null});p(this,"_currentTrack",0);p(this,"_isPlay",!1);if(this.observers=[],l.exists)return l.instance;l.instance=this,l.exists=!0,this.content=f,this.configureAudio()}getStatus(){return this._isPlay}configureAudio(){this.audio=new Audio,this.audio.src=this.content[this._currentTrack].audio,this.audio.addEventListener("loadeddata",()=>{this.configureView(),this.name.textContent=this.content[this._currentTrack].name,this.lengthTime.textContent=h(this.audio.duration),console.log("🍁: ",h(this.audio.duration))},!1),setInterval(()=>{this.range.setValueRange(this.audio.currentTime),this.range.updatePos(),this.currentTime.textContent=h(this.audio.currentTime)},500)}toggleStatus(){this._isPlay=!this._isPlay,this._isPlay?this.audio.play():this.audio.pause()}configureView(){const e=this.elementCreator.getElement();e.replaceChildren(),this.playButton=null,this._isPlay?this.playButton=new m(i.pause).getHtmlElement():this.playButton=new m(i.play).getHtmlElement(),this.leftButton=new m(i.arrowLeft).getHtmlElement(),this.rightButton=new m(i.arrowRight).getHtmlElement(),this.range=new _(this.audio.duration);const n=new o({tag:"div",classNames:["time"]}).getElement();this.currentTime=new o({tag:"div",classNames:["time__current"]}).getElement(),this.name=new o({tag:"div",classNames:["time__name"]}).getElement(),this.lengthTime=new o({tag:"div",classNames:["time__length"]}).getElement(),this.currentTime.textContent=h(this.audio.currentTime),n.append(this.currentTime,this.name,this.lengthTime),e.append(this.playButton,n,this.range.getHtmlElement(),this.leftButton,this.rightButton)}updateView(){const e=this.elementCreator.getElement();e.removeChild(this.playButton),this._isPlay?this.playButton=new m(i.pause).getHtmlElement():this.playButton=new m(i.play).getHtmlElement(),e.prepend(this.playButton),this.range.setValueRange(this.audio.currentTime),this.range.updatePos(),this.currentTime.textContent=h(this.audio.currentTime),this.lengthTime.textContent=h(this.audio.duration)}changeTrack(e){this.audio.pause(),this.audio=null,e===i.arrowLeft?this._currentTrack=this._currentTrack===0?this.content.length-1:this._currentTrack-1:e===i.arrowRight&&(this._currentTrack=this._currentTrack===this.content.length-1?0:this._currentTrack+1),this.notifyObserver(),this.configureAudio(),this._isPlay?this.audio.play():this.audio.pause()}getCurrentTrack(){return this._currentTrack}subscribe(e){this.observers.push(e)}notifyObserver(){this.observers.forEach(e=>e.update())}}class u extends c{constructor(){const t={tag:"div",classNames:["poster"],textContent:"",callback:null};if(super(t),u.exists)return u.instance;u.instance=this,u.exists=!0,this.player=new l,this.content=f,this.configureView()}configureView(){const t=this.elementCreator.getElement(),e=this.content[this.player.getCurrentTrack()].poster;t.replaceChildren();const n={tag:"img",classNames:["poster__image"],attribute:[{id:"src",value:e}],callback:null,textContent:""};t.append(new o(n).getElement())}update(){this.configureView()}}class I extends c{constructor(){const t={tag:"div",classNames:["content"],textContent:"",callback:null};super(t),this.configureView()}configureView(){const t=this.elementCreator.getElement(),e=new l().getHtmlElement(),n=new u().getHtmlElement();t.append(n,e)}}class A extends c{constructor(){const t={tag:"main",classNames:["main"]};super(t),this.configureView()}configureView(){this.elementCreator.getElement().append(new I().getHtmlElement())}}class O extends c{constructor(){const t={tag:"div",classNames:["wrapper"],textContent:"",callback:null};super(t),this.configureView()}configureView(){this.elementCreator.getElement().append(new A().getHtmlElement(),new C().getHtmlElement())}}class S{constructor(){this.body=document.querySelector("#app"),this.createHtmlElement()}createHtmlElement(){const t=new O;this.body.append(t.getHtmlElement())}}const U=new u,$=new l;$.subscribe(U);new S;